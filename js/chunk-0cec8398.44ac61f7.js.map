{"version":3,"sources":["webpack:///./src/views/frontend/ProductList.vue?9617","webpack:///src/views/frontend/ProductList.vue","webpack:///./src/views/frontend/ProductList.vue?6923","webpack:///./src/views/frontend/ProductList.vue?e57d","webpack:///./node_modules/core-js/modules/es.string.match.js","webpack:///./src/components/frontend/BtnAddHeartCart.vue?0e06","webpack:///src/components/frontend/BtnAddHeartCart.vue","webpack:///./src/components/frontend/BtnAddHeartCart.vue?bac2","webpack:///./src/components/frontend/BtnAddHeartCart.vue?ac75","webpack:///./src/components/frontend/BtnAddHeartCart.vue?0cf9","webpack:///./src/views/frontend/ProductList.vue?7a65"],"names":["render","_vm","this","_h","$createElement","_c","_self","directives","name","rawName","value","expression","staticClass","class","mobileView","isShow","isfixed","_l","item","index","key","category","en","attrs","on","$event","preventDefault","selcategory","cn","_v","_s","domProps","type","indexOf","_k","keyCode","searchFun","target","composing","keyword","priceSortFun","priceSort","_e","card","id","gotoProduct","staticStyle","style","title","_f","origin_price","price","staticRenderFns","data","productsList","categoryData","up","low","components","AddHeartCart","methods","scrollPage","e","srcElement","scrollingElement","scrollTop","getProducts","$store","commit","dispatch","window","scroll","$router","push","vm","products","filter","match","sort","a","b","resetCart","$emit","_isMobile","flag","computed","watch","created","mounted","component","fixRegExpWellKnownSymbolLogic","anObject","toLength","requireObjectCoercible","advanceStringIndex","regExpExec","MATCH","nativeMatch","maybeCallNative","regexp","O","matcher","undefined","call","RegExp","String","res","done","rx","S","global","fullUnicode","unicode","lastIndex","result","A","n","matchStr","heartActive","stopPropagation","removeHeart","addHeart","status","loadingItem","cartsLocalstorageId","isAdd","checkCarts","qty","addtoCart","productid","props","default","product_id","$http","post","url","response","success","changeCart","num","sumQty","delete","then","subtract","heartFun","heartAry","$bus","$on"],"mappings":"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","file":"js/chunk-0cec8398.44ac61f7.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"scroll\",rawName:\"v-scroll\",value:(_vm.scrollPage),expression:\"scrollPage\"}],staticClass:\"productlist-container fade\",class:{'mobile-view':_vm.mobileView,'show':_vm.isShow}},[_c('div',{staticClass:\"productlist-sidebar\",class:{'fixed':_vm.isfixed}},[_c('ul',{staticClass:\"sidebar-menu\"},_vm._l((_vm.categoryData),function(item,index){return _c('li',{key:index,class:{'active':_vm.category === item.en}},[_c('a',{attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.selcategory(item.cn,item.en)}}},[_vm._v(_vm._s(item.cn))])])}),0)]),_c('div',{staticClass:\"card-block\"},[_c('div',{staticClass:\"d-flex pb-3\"},[_c('div',{staticClass:\"search\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.keyword),expression:\"keyword\"}],attrs:{\"type\":\"text\",\"placeholder\":\"請輸入關鍵字\"},domProps:{\"value\":(_vm.keyword)},on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.searchFun($event)},\"input\":function($event){if($event.target.composing){ return; }_vm.keyword=$event.target.value}}}),_c('button',{attrs:{\"type\":\"button\"},on:{\"click\":_vm.searchFun}},[_c('i',{staticClass:\"fas fa-search\"})])]),_c('div',{staticClass:\"sort-block\"},[_c('button',{staticClass:\"btn price-sort-default\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.priceSortFun}},[_c('span',[_vm._v(\"價錢\")]),(_vm.priceSort.up)?_c('i',{staticClass:\"fas fa-long-arrow-alt-up\"}):_vm._e(),(_vm.priceSort.low)?_c('i',{staticClass:\"fas fa-long-arrow-alt-down\"}):_vm._e()])])]),_c('div',{staticClass:\"row align-items-stretch pb-5\"},_vm._l((_vm.productsList),function(card){return _c('div',{key:card.id,staticClass:\"product-list-card mb-4\"},[_c('div',{staticClass:\"card border-0 h-100\",on:{\"click\":function($event){return _vm.gotoProduct(card.id)}}},[_c('div',{staticClass:\"position-relative\",staticStyle:{\"height\":\"180px\"}},[_c('div',{staticClass:\"product-cover\",style:({'background-image': (\"url(\" + (card.imageUrl) + \")\")})}),_c('AddHeartCart',{attrs:{\"productid\":card.id}})],1),_c('div',{staticClass:\"py-3 px-3\"},[_c('h5',{staticClass:\"card-title\"},[_c('router-link',{staticClass:\"text-dark font-weight-bold\",attrs:{\"to\":'/product_page/'+card.id}},[_vm._v(_vm._s(card.title))])],1),_c('div',{staticClass:\"d-flex justify-content-between align-items-baseline\"},[_c('del',{staticClass:\"h6 text-black-50\"},[_vm._v(_vm._s(_vm._f(\"currency\")(card.origin_price)))]),_c('div',{staticClass:\"h5 text-danger\"},[_vm._v(_vm._s(_vm._f(\"currency\")(card.price))+\" 元\")])])])])])}),0)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div\r\n    class=\"productlist-container fade\"\r\n    :class=\"{'mobile-view':mobileView,'show':isShow}\"\r\n    v-scroll=\"scrollPage\"\r\n  >\r\n    <div class=\"productlist-sidebar\" :class=\"{'fixed':isfixed}\">\r\n      <ul class=\"sidebar-menu\">\r\n        <li\r\n          v-for=\"(item, index) in categoryData\"\r\n          :key=\"index\"\r\n          :class=\"{'active':category === item.en}\"\r\n        >\r\n          <a href=\"#\" @click.prevent=\"selcategory(item.cn,item.en)\">{{ item.cn }}</a>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n    <div class=\"card-block\">\r\n      <div class=\"d-flex pb-3\">\r\n        <div class=\"search\">\r\n          <input type=\"text\" placeholder=\"請輸入關鍵字\" v-model=\"keyword\" v-on:keyup.enter=\"searchFun\" />\r\n          <button type=\"button\" @click=\"searchFun\">\r\n            <i class=\"fas fa-search\"></i>\r\n          </button>\r\n        </div>\r\n        <div class=\"sort-block\">\r\n          <button type=\"button\" class=\"btn price-sort-default\" @click=\"priceSortFun\">\r\n            <span>價錢</span>\r\n            <i class=\"fas fa-long-arrow-alt-up\" v-if=\"priceSort.up\"></i>\r\n            <i class=\"fas fa-long-arrow-alt-down\" v-if=\"priceSort.low\"></i>\r\n          </button>\r\n        </div>\r\n      </div>\r\n      <div class=\"row align-items-stretch pb-5\">\r\n        <div class=\"product-list-card mb-4\" v-for=\"card in productsList\" :key=\"card.id\">\r\n          <div class=\"card border-0 h-100\" @click=\"gotoProduct(card.id)\">\r\n            <div class=\"position-relative\" style=\"height: 180px;\">\r\n              <div class=\"product-cover\" :style=\"{'background-image': `url(${card.imageUrl})`}\"></div>\r\n              <AddHeartCart :productid=\"card.id\"/>\r\n            </div>\r\n\r\n            <div class=\"py-3 px-3\">\r\n              <h5 class=\"card-title\">\r\n                <router-link\r\n                  :to=\"'/product_page/'+card.id\"\r\n                  class=\"text-dark font-weight-bold\"\r\n                >{{ card.title }}</router-link>\r\n              </h5>\r\n              <div class=\"d-flex justify-content-between align-items-baseline\">\r\n                <del class=\"h6 text-black-50\">{{ card.origin_price | currency }}</del>\r\n                <div class=\"h5 text-danger\">{{ card.price | currency }} 元</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style lang=\"scss\">\r\n@import \"../../assets/scss/frontend/web_product_list.scss\";\r\n</style>\r\n\r\n<script>\r\nimport AddHeartCart from '../../components/frontend/BtnAddHeartCart'\r\nimport { mapGetters } from 'vuex'\r\n\r\nexport default {\r\n  data () {\r\n    return {\r\n      productsList: [],\r\n      categoryData: [\r\n        { en: 'all', cn: '全部商品' },\r\n        { en: 'coffee', cn: '咖啡' },\r\n        { en: 'bread', cn: '麵包' },\r\n        { en: 'jam', cn: '果醬' },\r\n        { en: 'gummy', cn: '水果軟糖' }\r\n      ],\r\n      category: 'all',\r\n      keyword: '',\r\n      priceSort: {\r\n        up: true,\r\n        low: true\r\n      },\r\n      mobileView: false,\r\n      isfixed: false\r\n    }\r\n  },\r\n  components: {\r\n    AddHeartCart\r\n  },\r\n  methods: {\r\n    scrollPage (e) {\r\n      if (e.srcElement.scrollingElement.scrollTop > 0 && this.mobileView) {\r\n        this.isfixed = true\r\n      } else {\r\n        this.isfixed = false\r\n      }\r\n    },\r\n    getProducts () {\r\n      this.$store.commit('ISSHOW', false)\r\n      this.$store.dispatch('productsModules/getProductsAll')\r\n    },\r\n    gotoProduct (id) {\r\n      window.scroll(0, 0)\r\n      this.$router.push(`/product_page/${id}`)\r\n    },\r\n    selcategory (cn, en) {\r\n      const vm = this\r\n      vm.priceSort.up = true\r\n      vm.priceSort.low = true\r\n      vm.$store.commit('LOADING', true)\r\n      vm.category = en\r\n      if (en === 'all') {\r\n        vm.productsList = vm.products\r\n      } else {\r\n        vm.productsList = vm.products.filter(function (item) {\r\n          return item.category === cn\r\n        })\r\n      }\r\n      vm.$store.commit('LOADING', false)\r\n    },\r\n    searchFun () {\r\n      this.priceSort.up = true\r\n      this.priceSort.low = true\r\n      this.category = ''\r\n      this.productsList = this.products.filter(item => {\r\n        return item.title.match(this.keyword)\r\n      })\r\n    },\r\n    priceSortFun () {\r\n      // 預設→價錢由低到高\r\n      if (this.priceSort.up === this.priceSort.low) {\r\n        this.priceSort.low = false\r\n\r\n        this.productsList.sort(function (a, b) {\r\n          a = a.price\r\n          b = b.price\r\n          return a - b\r\n        })\r\n      } else if (this.priceSort.up && this.priceSort.low === false) {\r\n        // 價錢由高→低\r\n        this.priceSort.up = !this.priceSort.up\r\n        this.priceSort.low = !this.priceSort.low\r\n\r\n        this.productsList.sort(function (a, b) {\r\n          a = a.price\r\n          b = b.price\r\n          return b - a\r\n        })\r\n      } else if (this.priceSort.low && this.priceSort.up === false) {\r\n        // 價錢由低→高\r\n        this.priceSort.up = !this.priceSort.up\r\n        this.priceSort.low = !this.priceSort.low\r\n\r\n        this.productsList.sort(function (a, b) {\r\n          a = a.price\r\n          b = b.price\r\n          return a - b\r\n        })\r\n      }\r\n    },\r\n    resetCart () {\r\n      this.$emit('resetcart')\r\n    },\r\n    _isMobile () {\r\n      const flag = navigator.userAgent.match(\r\n        /(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i\r\n      )\r\n      return flag\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters('productsModules', ['products']),\r\n    ...mapGetters(['isShow'])\r\n  },\r\n  watch: {\r\n    products () {\r\n      this.productsList = this.products\r\n    }\r\n  },\r\n  created () {\r\n    this.getProducts()\r\n  },\r\n  mounted () {\r\n    if (this._isMobile()) {\r\n      this.mobileView = true\r\n    } else {\r\n      this.mobileView = false\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProductList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProductList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ProductList.vue?vue&type=template&id=410a2320&\"\nimport script from \"./ProductList.vue?vue&type=script&lang=js&\"\nexport * from \"./ProductList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ProductList.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar fixRegExpWellKnownSymbolLogic = require('../internals/fix-regexp-well-known-symbol-logic');\nvar anObject = require('../internals/an-object');\nvar toLength = require('../internals/to-length');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar advanceStringIndex = require('../internals/advance-string-index');\nvar regExpExec = require('../internals/regexp-exec-abstract');\n\n// @@match logic\nfixRegExpWellKnownSymbolLogic('match', 1, function (MATCH, nativeMatch, maybeCallNative) {\n  return [\n    // `String.prototype.match` method\n    // https://tc39.github.io/ecma262/#sec-string.prototype.match\n    function match(regexp) {\n      var O = requireObjectCoercible(this);\n      var matcher = regexp == undefined ? undefined : regexp[MATCH];\n      return matcher !== undefined ? matcher.call(regexp, O) : new RegExp(regexp)[MATCH](String(O));\n    },\n    // `RegExp.prototype[@@match]` method\n    // https://tc39.github.io/ecma262/#sec-regexp.prototype-@@match\n    function (regexp) {\n      var res = maybeCallNative(nativeMatch, regexp, this);\n      if (res.done) return res.value;\n\n      var rx = anObject(regexp);\n      var S = String(this);\n\n      if (!rx.global) return regExpExec(rx, S);\n\n      var fullUnicode = rx.unicode;\n      rx.lastIndex = 0;\n      var A = [];\n      var n = 0;\n      var result;\n      while ((result = regExpExec(rx, S)) !== null) {\n        var matchStr = String(result[0]);\n        A[n] = matchStr;\n        if (matchStr === '') rx.lastIndex = advanceStringIndex(S, toLength(rx.lastIndex), fullUnicode);\n        n++;\n      }\n      return n === 0 ? null : A;\n    }\n  ];\n});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"d-flex justify-content-end align-items-end\"},[(_vm.heartActive === _vm.id)?_c('button',{staticClass:\"btn-heart\",attrs:{\"type\":\"button\",\"title\":\"取消關注\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.removeHeart(_vm.id)}}},[_c('i',{staticClass:\"fas fa-heart\"}),_c('span',[_vm._v(\"取消關注\")])]):_c('button',{staticClass:\"btn-heart\",attrs:{\"type\":\"button\",\"title\":\"加入關注\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.addHeart(_vm.id)}}},[(_vm.status.loadingItem === _vm.id)?_c('i',{staticClass:\"fas fa-spinner fa-pulse\"}):_c('i',{staticClass:\"far fa-heart\"}),_c('span',[_vm._v(\"加入關注\")])]),(_vm.cartsLocalstorageId.indexOf(_vm.id) > -1 || _vm.isAdd)?_c('button',{staticClass:\"btn-cart\",attrs:{\"type\":\"button\",\"title\":\"加入購物車\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.checkCarts(_vm.id,_vm.qty)}}},[(_vm.status.loadingItem === _vm.id)?_c('i',{staticClass:\"fas fa-spinner fa-pulse\"}):_c('i',{staticClass:\"fas fa-shopping-basket\"}),_c('span',[_vm._v(\"加入購物車\")])]):_c('button',{staticClass:\"btn-cart\",attrs:{\"type\":\"button\",\"title\":\"加入購物車\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.addtoCart(_vm.id,_vm.qty)}}},[(_vm.status.loadingItem === _vm.id)?_c('i',{staticClass:\"fas fa-spinner fa-pulse\"}):_c('i',{staticClass:\"fas fa-shopping-basket\"}),_c('span',[_vm._v(\"加入購物車\")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"d-flex justify-content-end align-items-end\">\r\n    <button\r\n      class=\"btn-heart\"\r\n      type=\"button\"\r\n      title=\"取消關注\"\r\n      @click.stop=\"removeHeart(id)\"\r\n      v-if=\"heartActive === id\"\r\n    >\r\n      <i class=\"fas fa-heart\"></i>\r\n      <span>取消關注</span>\r\n    </button>\r\n    <button class=\"btn-heart\" type=\"button\" title=\"加入關注\" @click.stop=\"addHeart(id)\" v-else>\r\n      <i class=\"fas fa-spinner fa-pulse\" v-if=\"status.loadingItem === id\"></i>\r\n      <i class=\"far fa-heart\" v-else></i>\r\n      <span>加入關注</span>\r\n    </button>\r\n\r\n    <button class=\"btn-cart\" type=\"button\" @click.stop=\"checkCarts(id,qty)\" title=\"加入購物車\" v-if=\"cartsLocalstorageId.indexOf(id) > -1 || isAdd\">\r\n      <i class=\"fas fa-spinner fa-pulse\" v-if=\"status.loadingItem === id\"></i>\r\n      <i class=\"fas fa-shopping-basket\" v-else></i>\r\n      <span>加入購物車</span>\r\n    </button>\r\n    <button class=\"btn-cart\" type=\"button\" @click.stop=\"addtoCart(id,qty)\" title=\"加入購物車\" v-else>\r\n      <i class=\"fas fa-spinner fa-pulse\" v-if=\"status.loadingItem === id\"></i>\r\n      <i class=\"fas fa-shopping-basket\" v-else></i>\r\n      <span>加入購物車</span>\r\n    </button>\r\n  </div>\r\n</template>\r\n\r\n<style scoped>\r\n.btn-heart:focus,\r\n.btn-cart:focus {\r\n  outline: 0;\r\n}\r\n</style>\r\n\r\n<script>\r\nimport { mapGetters } from 'vuex'\r\n\r\nexport default {\r\n  data () {\r\n    return {\r\n      id: this.productid,\r\n      qty: 1,\r\n      isAdd: false,\r\n      heartActive: '',\r\n      status: {\r\n        loadingItem: ''\r\n      }\r\n    }\r\n  },\r\n  props: {\r\n    productid: {\r\n      type: String,\r\n      default: ''\r\n    }\r\n  },\r\n  methods: {\r\n    addtoCart (id, qty) {\r\n      this.isAdd = true\r\n      const url = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_CUSTOMPATH}/cart`\r\n      this.$store.commit('LOADING', true)\r\n      this.status.loadingItem = id\r\n      const cart = {\r\n        product_id: id,\r\n        qty\r\n      }\r\n      this.$http.post(url, { data: cart }).then(response => {\r\n        if (response.data.success) {\r\n          this.status.loadingItem = ''\r\n          this.$store.dispatch('cartsModules/getCarts')\r\n          this.$store.dispatch('updateMessage', { msg: response.data.message, status: 'light' }, { root: true })\r\n        } else {\r\n          this.$store.dispatch('updateMessage', { msg: response.data.message, status: 'dark' }, { root: true })\r\n        }\r\n      })\r\n    },\r\n    checkCarts (item, num) {\r\n      this.$store.commit('cartsModules/GETCARTSLOCALSTORAGE')\r\n      this.changeCart(item, num)\r\n    },\r\n    changeCart (item, num) {\r\n      const vm = this\r\n      vm.$store.commit('LOADING', true)\r\n      const i = this.cartsLocalstorageId.indexOf(item)\r\n      const id = this.cartsLocalstorage[i].id\r\n      const qty = this.cartsLocalstorage[i].qty\r\n      const sumQty = qty + num\r\n      const url = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_CUSTOMPATH}/cart/${id}`\r\n\r\n      if (sumQty <= 10) {\r\n        vm.$http.delete(url).then(response => {\r\n          if (response.data.success) {\r\n            vm.addtoCart(item, sumQty)\r\n          }\r\n        })\r\n      } else if (sumQty > 10) {\r\n        const subtract = 10 - qty\r\n        if (subtract === 0) {\r\n          vm.$store.commit('LOADING', false)\r\n          vm.$store.dispatch('updateMessage', { msg: '不好意思本商品最多一次只能購買10個，您已購買10個此產品。', status: 'dark' })\r\n        } else if (subtract > 0) {\r\n          vm.$http.delete(url).then(response => {\r\n            if (response.data.success) {\r\n              vm.addtoCart(item, 10)\r\n            }\r\n          })\r\n          vm.$store.dispatch('updateMessage', { msg: '不好意思本商品最多一次只能購買10個, 大量購買請來電聯繫', status: 'dark' })\r\n        }\r\n      }\r\n    },\r\n    addHeart (id) {\r\n      this.$store.dispatch('heartModules/addHeart', id)\r\n      this.heartFun()\r\n    },\r\n    removeHeart (id) {\r\n      this.$store.dispatch('heartModules/removeHeart', id)\r\n      this.heartFun()\r\n    },\r\n    heartFun () {\r\n      const heartAry = JSON.parse(localStorage.getItem('heartStr')) || []\r\n      if (heartAry.indexOf(this.id) > -1) {\r\n        this.heartActive = this.id\r\n      } else if (heartAry.indexOf(this.id) === -1) {\r\n        this.heartActive = ''\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters('cartsModules', ['cartsLocalstorageId', 'cartsLocalstorage'])\r\n  },\r\n  created () {\r\n    this.heartFun()\r\n    this.$store.commit('cartsModules/GETCARTSLOCALSTORAGE')\r\n\r\n    this.$bus.$on('addcart:qty', num => {\r\n      this.qty = num\r\n    })\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BtnAddHeartCart.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BtnAddHeartCart.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BtnAddHeartCart.vue?vue&type=template&id=6b816b4c&scoped=true&\"\nimport script from \"./BtnAddHeartCart.vue?vue&type=script&lang=js&\"\nexport * from \"./BtnAddHeartCart.vue?vue&type=script&lang=js&\"\nimport style0 from \"./BtnAddHeartCart.vue?vue&type=style&index=0&id=6b816b4c&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6b816b4c\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BtnAddHeartCart.vue?vue&type=style&index=0&id=6b816b4c&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BtnAddHeartCart.vue?vue&type=style&index=0&id=6b816b4c&scoped=true&lang=css&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProductList.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProductList.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}